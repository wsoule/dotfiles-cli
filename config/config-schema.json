{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Dotfiles Configuration Schema",
  "description": "JSON schema for validating dotfiles configuration",
  "type": "object",
  "required": ["personal", "installation", "system", "development", "packages", "directories", "metadata"],
  "properties": {
    "personal": {
      "type": "object",
      "description": "Personal information and preferences",
      "required": ["name", "email", "editor"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Full name for git configuration",
          "minLength": 1
        },
        "email": {
          "type": "string",
          "description": "Email address for git configuration",
          "format": "email"
        },
        "editor": {
          "type": "string",
          "description": "Preferred code editor",
          "enum": ["nvim", "vim", "code", "subl", "nano", "emacs"]
        }
      }
    },
    "installation": {
      "type": "object",
      "description": "Installation component toggles",
      "required": ["homebrew", "brewfile", "dotfiles", "macos_defaults", "npm_packages"],
      "properties": {
        "homebrew": {
          "type": "boolean",
          "description": "Install Homebrew package manager"
        },
        "brewfile": {
          "type": "boolean",
          "description": "Install packages from Brewfile"
        },
        "dotfiles": {
          "type": "boolean",
          "description": "Symlink dotfiles with stow"
        },
        "macos_defaults": {
          "type": "boolean",
          "description": "Apply macOS system defaults"
        },
        "npm_packages": {
          "type": "boolean",
          "description": "Install global npm packages"
        }
      }
    },
    "system": {
      "type": "object",
      "description": "macOS system settings",
      "required": ["appearance", "dock", "finder", "keyboard", "security"],
      "properties": {
        "appearance": {
          "type": "object",
          "required": ["dark_mode", "enable_24_hour_time"],
          "properties": {
            "dark_mode": {
              "type": "boolean",
              "description": "Enable dark mode"
            },
            "enable_24_hour_time": {
              "type": "boolean",
              "description": "Use 24-hour time format"
            }
          }
        },
        "dock": {
          "type": "object",
          "required": ["autohide", "position", "tile_size", "magnification"],
          "properties": {
            "autohide": {
              "type": "boolean",
              "description": "Auto-hide dock"
            },
            "position": {
              "type": "string",
              "enum": ["bottom", "left", "right"],
              "description": "Dock position"
            },
            "tile_size": {
              "type": "integer",
              "minimum": 16,
              "maximum": 128,
              "description": "Dock tile size in pixels"
            },
            "magnification": {
              "type": "boolean",
              "description": "Enable dock magnification"
            }
          }
        },
        "finder": {
          "type": "object",
          "required": ["show_hidden_files", "default_view", "show_file_extensions"],
          "properties": {
            "show_hidden_files": {
              "type": "boolean",
              "description": "Show hidden files in Finder"
            },
            "default_view": {
              "type": "string",
              "enum": ["icon", "list", "column", "gallery"],
              "description": "Default Finder view style"
            },
            "show_file_extensions": {
              "type": "boolean",
              "description": "Show file extensions"
            }
          }
        },
        "keyboard": {
          "type": "object",
          "required": ["key_repeat_rate", "disable_press_and_hold"],
          "properties": {
            "key_repeat_rate": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "description": "Key repeat rate (1=fastest, 10=slowest)"
            },
            "disable_press_and_hold": {
              "type": "boolean",
              "description": "Disable press-and-hold for accent characters"
            }
          }
        },
        "security": {
          "type": "object",
          "required": ["require_password_immediately", "display_sleep_minutes", "computer_sleep_minutes"],
          "properties": {
            "require_password_immediately": {
              "type": "boolean",
              "description": "Require password immediately after sleep"
            },
            "display_sleep_minutes": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180,
              "description": "Display sleep time in minutes"
            },
            "computer_sleep_minutes": {
              "type": "integer",
              "minimum": 1,
              "maximum": 180,
              "description": "Computer sleep time in minutes"
            }
          }
        },
        "screenshots": {
          "type": "object",
          "properties": {
            "location": {
              "type": "string",
              "description": "Screenshot save location"
            },
            "format": {
              "type": "string",
              "enum": ["png", "jpg", "pdf"],
              "description": "Screenshot format"
            }
          }
        },
        "menu_bar": {
          "type": "object",
          "properties": {
            "show_battery_percent": {
              "type": "boolean",
              "description": "Show battery percentage in menu bar"
            },
            "show_date": {
              "type": "boolean",
              "description": "Show date in menu bar"
            }
          }
        },
        "safari": {
          "type": "object",
          "properties": {
            "show_develop_menu": {
              "type": "boolean",
              "description": "Show Safari develop menu"
            },
            "default_encoding": {
              "type": "string",
              "description": "Default text encoding"
            }
          }
        }
      }
    },
    "development": {
      "type": "object",
      "description": "Development environment settings",
      "required": ["git", "languages", "shell"],
      "properties": {
        "git": {
          "type": "object",
          "required": ["default_branch", "pull_rebase", "push_default"],
          "properties": {
            "default_branch": {
              "type": "string",
              "description": "Default git branch name",
              "minLength": 1
            },
            "pull_rebase": {
              "type": "boolean",
              "description": "Use rebase for git pull by default"
            },
            "push_default": {
              "type": "string",
              "enum": ["simple", "matching", "current"],
              "description": "Default git push behavior"
            }
          }
        },
        "languages": {
          "type": "object",
          "description": "Programming language support",
          "required": ["node", "python", "docker", "go", "rust", "java"],
          "properties": {
            "node": {
              "type": "boolean",
              "description": "Enable Node.js support"
            },
            "python": {
              "type": "boolean",
              "description": "Enable Python support"
            },
            "docker": {
              "type": "boolean",
              "description": "Enable Docker support"
            },
            "go": {
              "type": "boolean",
              "description": "Enable Go support"
            },
            "rust": {
              "type": "boolean",
              "description": "Enable Rust support"
            },
            "java": {
              "type": "boolean",
              "description": "Enable Java support"
            }
          }
        },
        "shell": {
          "type": "object",
          "required": ["theme", "terminal_theme", "plugins"],
          "properties": {
            "theme": {
              "type": "string",
              "enum": ["powerlevel10k", "starship", "oh-my-zsh", "minimal"],
              "description": "Shell prompt theme"
            },
            "terminal_theme": {
              "type": "string",
              "enum": ["dark", "light", "auto"],
              "description": "Terminal color scheme"
            },
            "plugins": {
              "type": "object",
              "required": ["autosuggestions", "syntax_highlighting", "fzf", "zoxide"],
              "properties": {
                "autosuggestions": {
                  "type": "boolean",
                  "description": "Enable auto-suggestions"
                },
                "syntax_highlighting": {
                  "type": "boolean",
                  "description": "Enable syntax highlighting"
                },
                "fzf": {
                  "type": "boolean",
                  "description": "Enable fuzzy finder"
                },
                "zoxide": {
                  "type": "boolean",
                  "description": "Enable smart directory navigation"
                }
              }
            }
          }
        },
        "aliases": {
          "type": "object",
          "properties": {
            "node": {
              "type": "boolean",
              "description": "Enable Node.js aliases"
            },
            "git": {
              "type": "boolean",
              "description": "Enable git aliases"
            },
            "docker": {
              "type": "boolean",
              "description": "Enable Docker aliases"
            },
            "system": {
              "type": "boolean",
              "description": "Enable system aliases"
            }
          }
        }
      }
    },
    "packages": {
      "type": "object",
      "description": "Package installation configuration",
      "required": ["extra_brews", "extra_casks", "extra_taps", "npm_globals"],
      "properties": {
        "extra_brews": {
          "type": "array",
          "description": "Additional Homebrew formulae",
          "items": {
            "type": "string",
            "minLength": 1
          }
        },
        "extra_casks": {
          "type": "array",
          "description": "Additional Homebrew casks",
          "items": {
            "type": "string",
            "minLength": 1
          }
        },
        "extra_taps": {
          "type": "array",
          "description": "Additional Homebrew taps",
          "items": {
            "type": "string",
            "minLength": 1
          }
        },
        "npm_globals": {
          "type": "array",
          "description": "Global npm packages",
          "items": {
            "type": "string",
            "minLength": 1
          }
        }
      }
    },
    "directories": {
      "type": "array",
      "description": "Directories to create during installation",
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "stow_exclusions": {
      "type": "array",
      "description": "Directories to exclude from stow operations",
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "metadata": {
      "type": "object",
      "description": "Configuration metadata",
      "required": ["version", "created_at", "last_modified", "created_by"],
      "properties": {
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Configuration format version"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp"
        },
        "last_modified": {
          "type": "string",
          "format": "date-time",
          "description": "Last modification timestamp"
        },
        "created_by": {
          "type": "string",
          "description": "Creator or tool that generated this config"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description of this configuration"
        }
      }
    }
  }
}